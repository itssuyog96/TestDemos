package com.zycus.app;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

import com.zycus.models.Employee;

public class AppLogic {
	private static final String DATA_PATH = "D:\\data\\emps.txt";
	private static final String sep = ", ";

	public Employee[] read() {
		Employee[] temp = new Employee[100];
		int i = 0;
		try (BufferedReader br = new BufferedReader(new FileReader(DATA_PATH))) {
			String line = br.readLine();
			while (line != null && line.trim().length() > 0) {
				String[] fields = line.split(sep);
				Employee e = new convert(fields);
			}

		} catch (IOException e) {
			e.printStackTrace();
		}
		
		return temp;
	}

	private Employee convert(String[] values) {

		String fname = values[0];
		String lname = values[1];
		String tempAge = values[2];
		int age = Integer.parseInt(tempAge);
		String design = values[3];

		return Employee(fname, lname, design, age);
	}

	public void write(Employee[] emps) {

		try (BufferedWriter bw = new BufferedWriter(new FileWriter(DATA_PATH))) {
			for (Employee e : emps) {
				bw.write(e.getFirstName() + sep + e.getLastName() + sep + e.getAge() + sep + e.getDesignation());
				bw.flush();
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
